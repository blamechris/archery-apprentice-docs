<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>Technical Debt Master Document</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;family=IBM Plex Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="Archery Apprentice Documentation"/><meta property="og:title" content="Technical Debt Master Document"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Technical Debt Master Document"/><meta name="twitter:description" content="Technical Debt Master Document Last Updated: October 9, 2025 Investigation: Checkpoint-1 comprehensive codebase audit Status: 6 critical issues, 2 medium issues, 5 low-priority items Recent Win: ✅ StateFlow delegation complete (145 lines, 6% LiveScoringViewModel reduction) Executive Summary Project ..."/><meta property="og:description" content="Technical Debt Master Document Last Updated: October 9, 2025 Investigation: Checkpoint-1 comprehensive codebase audit Status: 6 critical issues, 2 medium issues, 5 low-priority items Recent Win: ✅ StateFlow delegation complete (145 lines, 6% LiveScoringViewModel reduction) Executive Summary Project ..."/><meta property="og:image:alt" content="Technical Debt Master Document Last Updated: October 9, 2025 Investigation: Checkpoint-1 comprehensive codebase audit Status: 6 critical issues, 2 medium issues, 5 low-priority items Recent Win: ✅ StateFlow delegation complete (145 lines, 6% LiveScoringViewModel reduction) Executive Summary Project ..."/><meta property="twitter:domain" content="blamechris.github.io/archery-apprentice-docs"/><meta property="og:url" content="https://blamechris.github.io/archery-apprentice-docs/developer-guide/architecture/technical-debt"/><meta property="twitter:url" content="https://blamechris.github.io/archery-apprentice-docs/developer-guide/architecture/technical-debt"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="Technical Debt Master Document Last Updated: October 9, 2025 Investigation: Checkpoint-1 comprehensive codebase audit Status: 6 critical issues, 2 medium issues, 5 low-priority items Recent Win: ✅ StateFlow delegation complete (145 lines, 6% LiveScoringViewModel reduction) Executive Summary Project ..."/><meta name="generator" content="Quartz"/><link href="../../index.css" rel="stylesheet" type="text/css" spa-preserve/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  padding: 2rem;
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvYXJjaGVyeS1hcHByZW50aWNlLWRvY3MvYXJjaGVyeS1hcHByZW50aWNlLWRvY3MvcXVhcnR6L2NvbXBvbmVudHMvc3R5bGVzIiwic291cmNlcyI6WyJtZXJtYWlkLmlubGluZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBOztBQUdGO0VBQ0U7RUFDQTs7QUFHRjtFQUNFOzs7QUFLRjtFQUNFO0VBQ0E7OztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUlKO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7O0FBRUE7RUFDRTs7QUFHRjtFQUNFOztBQUlGO0VBQ0U7RUFDQTtFQUNBIiwic291cmNlc0NvbnRlbnQiOlsiLmV4cGFuZC1idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsb2F0OiByaWdodDtcbiAgcGFkZGluZzogMC40cmVtO1xuICBtYXJnaW46IDAuM3JlbTtcbiAgcmlnaHQ6IDA7IC8vIE5PVEU6IHJpZ2h0IHdpbGwgYmUgc2V0IGluIG1lcm1haWQuaW5saW5lLnRzXG4gIGNvbG9yOiB2YXIoLS1ncmF5KTtcbiAgYm9yZGVyLWNvbG9yOiB2YXIoLS1kYXJrKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICBib3JkZXI6IDFweCBzb2xpZDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBvcGFjaXR5OiAwO1xuICB0cmFuc2l0aW9uOiAwLjJzO1xuXG4gICYgPiBzdmcge1xuICAgIGZpbGw6IHZhcigtLWxpZ2h0KTtcbiAgICBmaWx0ZXI6IGNvbnRyYXN0KDAuMyk7XG4gIH1cblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1zZWNvbmRhcnkpO1xuICB9XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogMDtcbiAgfVxufVxuXG5wcmUge1xuICAmOmhvdmVyID4gLmV4cGFuZC1idXR0b24ge1xuICAgIG9wYWNpdHk6IDE7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgfVxufVxuXG4jbWVybWFpZC1jb250YWluZXIge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGNvbnRhaW46IGxheW91dDtcbiAgei1pbmRleDogOTk5O1xuICBsZWZ0OiAwO1xuICB0b3A6IDA7XG4gIHdpZHRoOiAxMDB2dztcbiAgaGVpZ2h0OiAxMDB2aDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogbm9uZTtcbiAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDRweCk7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC41KTtcblxuICAmLmFjdGl2ZSB7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgJiA+ICNtZXJtYWlkLXNwYWNlIHtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWxpZ2h0KTtcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICBoZWlnaHQ6IDgwdmg7XG4gICAgd2lkdGg6IDgwdnc7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAgICYgPiAubWVybWFpZC1jb250ZW50IHtcbiAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4xcyBlYXNlO1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgICBtaW4taGVpZ2h0OiAyMDBweDtcbiAgICAgIG1pbi13aWR0aDogMjAwcHg7XG5cbiAgICAgIHByZSB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgfVxuXG4gICAgICBzdmcge1xuICAgICAgICBtYXgtd2lkdGg6IG5vbmU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAmID4gLm1lcm1haWQtY29udHJvbHMge1xuICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgYm90dG9tOiAyMHB4O1xuICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgZ2FwOiA4cHg7XG4gICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1saWdodCk7XG4gICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1saWdodGdyYXkpO1xuICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgIHotaW5kZXg6IDI7XG5cbiAgICAgIC5tZXJtYWlkLWNvbnRyb2wtYnV0dG9uIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICBoZWlnaHQ6IDMycHg7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWRhcmspO1xuICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICBmb250LWZhbWlseTogdmFyKC0tYm9keUZvbnQpO1xuICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuXG4gICAgICAgICY6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICAgIH1cblxuICAgICAgICAmOmFjdGl2ZSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDFweCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdHlsZSB0aGUgcmVzZXQgYnV0dG9uIGRpZmZlcmVudGx5XG4gICAgICAgICY6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgICB3aWR0aDogYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAwIDEycHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0= */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://blamechris.github.io/archery-apprentice-docs/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://blamechris.github.io/archery-apprentice-docs/developer-guide/architecture/technical-debt-og-image.webp"/><meta property="og:image:url" content="https://blamechris.github.io/archery-apprentice-docs/developer-guide/architecture/technical-debt-og-image.webp"/><meta name="twitter:image" content="https://blamechris.github.io/archery-apprentice-docs/developer-guide/architecture/technical-debt-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="developer-guide/architecture/technical-debt"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../..">Archery Apprentice Documentation</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slugSegment!==\&quot;tags\&quot;&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-55"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-55" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-0"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../developer-guide/">developer guide</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../developer-guide/architecture/">architecture</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Technical Debt Master Document</a></div></nav><h1 class="article-title">Technical Debt Master Document</h1><p show-comma="true" class="content-meta"><time datetime="2025-10-08T00:00:00.000Z">Oct 08, 2025</time><span>11 min read</span></p><ul class="tags"><li><a href="../../tags/architecture" class="internal tag-link">architecture</a></li><li><a href="../../tags/tech-debt" class="internal tag-link">tech-debt</a></li><li><a href="../../tags/refactoring" class="internal tag-link">refactoring</a></li><li><a href="../../tags/priorities" class="internal tag-link">priorities</a></li></ul></div></div><article class="popover-hint"><h1 id="technical-debt-master-document">Technical Debt Master Document<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#technical-debt-master-document" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<p><strong>Last Updated:</strong> October 9, 2025
<strong>Investigation:</strong> Checkpoint-1 comprehensive codebase audit
<strong>Status:</strong> 6 critical issues, 2 medium issues, 5 low-priority items
<strong>Recent Win:</strong> ✅ StateFlow delegation complete (145 lines, 6% LiveScoringViewModel reduction)</p>
<hr/>
<h2 id="executive-summary">Executive Summary<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#executive-summary" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p><strong>Project Health:</strong> 98% feature complete, but carrying significant architectural debt</p>
<p><strong>Total Estimated Effort to Address:</strong> 12-15 weeks of focused work</p>
<p><strong>Primary Concerns:</strong></p>
<ul>
<li><strong>God class antipattern</strong> across ViewModels (LiveScoringViewModel: 2,134 lines, down from 2,808)</li>
<li><strong>Repository bloat</strong> (5,959 lines across 5 files violating SRP)</li>
<li><strong>Incomplete features</strong> marked as “complete” in documentation</li>
<li><strong>Documentation chaos</strong> (10+ severely outdated files)</li>
</ul>
<p><strong>Recommended Strategy:</strong> Incremental extraction over 3 months, prioritized by user impact</p>
<hr/>
<h2 id="priority-matrix">Priority Matrix<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#priority-matrix" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="-critical-p0---address-before-next-feature-epoch">🚨 CRITICAL (P0) - Address Before Next Feature Epoch<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-critical-p0---address-before-next-feature-epoch" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>











































































<div class="table-container"><table><thead><tr><th>Issue</th><th>Impact</th><th>Effort</th><th>Priority Score</th><th>Status</th></tr></thead><tbody><tr><td>N+1 Query Pattern</td><td>HIGH</td><td>2 hours</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>Average Score Bug</td><td>MEDIUM</td><td>30 min</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>TournamentSyncService Extraction</td><td>HIGH</td><td>1 week</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>ScoreConflictResolution Extraction</td><td>HIGH</td><td>1 week</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>EndCompletionService Extraction</td><td>HIGH</td><td>1 week</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>StateFlow Delegation</td><td>MEDIUM</td><td>3 days</td><td>⭐⭐⭐⭐</td><td>✅ DONE (Oct 9)</td></tr><tr><td>Tournament Rank Bug</td><td>HIGH</td><td>1 hour</td><td>⭐⭐⭐⭐⭐</td><td>✅ DONE (Oct 9)</td></tr><tr><td>Tie-Breaking Implementation</td><td>HIGH</td><td>4-8 hours</td><td>⭐⭐⭐⭐</td><td>✅ DONE</td></tr><tr><td>LiveScoringViewModel Extraction</td><td>CRITICAL</td><td>2-3 weeks</td><td>⭐⭐⭐</td><td>🔄 IN PROGRESS (68% done)</td></tr></tbody></table></div>
<h3 id="-high-p1---next-2-3-months">🟡 HIGH (P1) - Next 2-3 Months<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-high-p1---next-2-3-months" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>





























<div class="table-container"><table><thead><tr><th>Issue</th><th>Impact</th><th>Effort</th><th>Priority Score</th></tr></thead><tbody><tr><td>Repository God Classes</td><td>HIGH</td><td>6-7 weeks</td><td>⭐⭐⭐</td></tr><tr><td>Documentation Cleanup</td><td>MEDIUM</td><td>1 week</td><td>⭐⭐⭐</td></tr><tr><td>Missing Indexes</td><td>MEDIUM</td><td>2 hours</td><td>⭐⭐</td></tr></tbody></table></div>
<h3 id="-medium-p2---future-improvements">🟢 MEDIUM (P2) - Future Improvements<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-medium-p2---future-improvements" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>




















<div class="table-container"><table><thead><tr><th>Issue</th><th>Impact</th><th>Effort</th></tr></thead><tbody><tr><td>RoundViewModel Size</td><td>LOW</td><td>3-4 weeks</td></tr><tr><td>ActiveScoringScreen Size</td><td>LOW</td><td>2-3 weeks</td></tr></tbody></table></div>
<hr/>
<h2 id="critical-issues-p0">Critical Issues (P0)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#critical-issues-p0" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="1-n1-query-pattern--fixed">1. N+1 Query Pattern ✅ <strong>FIXED</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-n1-query-pattern--fixed" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>RoundRepository.kt:97-99, 194-196</code> | <code>RoundDao.kt:558-624</code>
<strong>Impact:</strong> 30-end round = 31 database queries instead of 1 (3000% overhead!)
<strong>Status:</strong> ✅ COMPLETED - October 4, 2025</p>
<p><strong>Problem (BEFORE):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// N+1 anti-pattern</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endScores </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> roundDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEndScoresForRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roundId)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 query</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ends </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endScores.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { endScore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arrows </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> roundDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getArrowScoresForEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(endScore.id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toLong</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// N queries!</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    EndScoreWithArrows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(endScore, arrows)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Single optimized LEFT JOIN query</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endWithArrowData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> roundDao.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEndsWithArrowsForRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(roundId)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 query</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ends </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> groupEndWithArrowData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(endWithArrowData)</span></span></code></pre></figure>
<p><strong>Performance Gain:</strong> 85-95% reduction (31 queries → 1 query)
<strong>User Impact:</strong> Noticeably faster round loading, better battery life</p>
<hr/>
<h3 id="2-average-score-always-shows-00--fixed">2. Average Score Always Shows 0.0 ✅ <strong>FIXED</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-average-score-always-shows-00--fixed" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>FirebaseTournamentRepository.kt:1115-1137</code>
<strong>Impact:</strong> All tournament leaderboards show “Avg 0.0” (100% of users affected)
<strong>Status:</strong> ✅ COMPLETED - October 4, 2025</p>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Calculate average score per end</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newAverageScore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (newEndsCompleted </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">></span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    newTotal.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toDouble</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newEndsCompleted</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    0.0</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> participantUpdateData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mapOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;currentScore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> to newTotal,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;arrowsShot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> to newArrowsShot,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;endsCompleted&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> to newEndsCompleted,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;averageScore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> to newAverageScore,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ✅ NOW INCLUDED</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    ..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></figure>
<p><strong>User Impact:</strong> Professional-looking leaderboards with accurate statistics</p>
<hr/>
<h3 id="3-tournamentsyncservice-extraction--complete">3. TournamentSyncService Extraction ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-tournamentsyncservice-extraction--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Files:</strong></p>
<ul>
<li><code>TournamentSyncService.kt</code> (NEW) - 556 lines extracted from LiveScoringViewModel</li>
<li><code>LiveScoringViewModel.kt</code> - Reduced from 2,808 → 2,252 lines (initial extraction)
<strong>Impact:</strong> First phase of LiveScoringViewModel god class refactoring
<strong>Status:</strong> ✅ COMPLETED - October 5, 2025
<strong>Commit:</strong> <code>b810eea</code> - “refactor: Extract TournamentSyncService from LiveScoringViewModel”</li>
</ul>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@Singleton</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TournamentSyncService</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @Inject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Context</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repositoryFactory: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RepositoryFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serviceScope: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CoroutineScope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 5 StateFlows for tournament state</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> syncStatus: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentSyncStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentRoundState: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> incomingTournamentScores: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentScore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> liveLeaderboard: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">LeaderboardEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentParticipants: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentParticipant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>></span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Core sync methods</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setupTournamentSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tournamentId: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, currentRoundNumber: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> syncTournamentScoresManually</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tournamentId: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, currentParticipantIds: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> submitTournamentScoreWithRetry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> updateTournamentRoundStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> observeTournamentRoundState</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tournamentId: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, roundNumber: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cleanup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p><strong>Benefits:</strong></p>
<ul>
<li>✅ 556 lines extracted from LiveScoringViewModel</li>
<li>✅ Clear separation of concerns (tournament sync vs. scoring logic)</li>
<li>✅ Easier to test tournament sync in isolation</li>
<li>✅ Foundation for future service extractions</li>
<li>✅ Proof-of-concept for ViewModel refactoring strategy</li>
</ul>
<hr/>
<h3 id="4-scoreconflictresolutionservice-extraction--complete">4. ScoreConflictResolutionService Extraction ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#4-scoreconflictresolutionservice-extraction--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>ScoreConflictResolutionService.kt</code> (NEW) - 262 lines extracted from LiveScoringViewModel
<strong>Impact:</strong> Second phase of LiveScoringViewModel god class refactoring
<strong>Status:</strong> ✅ COMPLETED - October 2025
<strong>Commit:</strong> <code>4d38c7b</code> - “feat: Implement tournament tie-breaking and extract ScoreConflictResolutionService”</p>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@Singleton</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ScoreConflictResolutionService</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @Inject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serviceScope: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CoroutineScope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Conflict state management</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> detectedConflicts: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ScoreConflict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>></span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hasActiveConflicts: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">></span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Core conflict methods</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> detectConflicts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolveConflict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clearConflicts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p><strong>Benefits:</strong></p>
<ul>
<li>✅ 262 lines extracted from LiveScoringViewModel</li>
<li>✅ Isolated conflict resolution logic for easier testing</li>
<li>✅ Reusable conflict resolution strategies</li>
<li>✅ Clear separation of concerns</li>
</ul>
<hr/>
<h3 id="5-endcompletionservice-extraction--complete">5. EndCompletionService Extraction ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#5-endcompletionservice-extraction--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>EndCompletionService.kt</code> (NEW) - 400 lines extracted from LiveScoringViewModel
<strong>Impact:</strong> Third phase of LiveScoringViewModel god class refactoring
<strong>Status:</strong> ✅ COMPLETED - October 6, 2025</p>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@Singleton</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EndCompletionService</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @Inject</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> application: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> roundRepository: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RoundRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repositoryFactory: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RepositoryFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentSyncService: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentSyncService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serviceScope: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CoroutineScope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">? </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> recordEndCompletion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    suspend</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> completeCurrentEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> finalizeEnd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    fun</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkAllParticipantsComplete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></figure>
<p><strong>Benefits:</strong></p>
<ul>
<li>✅ 400 lines extracted from LiveScoringViewModel</li>
<li>✅ Clear end completion logic boundary</li>
<li>✅ Delegates tournament submission to TournamentSyncService</li>
<li>✅ Comprehensive test coverage</li>
</ul>
<hr/>
<h3 id="6-stateflow-delegation--complete">6. StateFlow Delegation ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#6-stateflow-delegation--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>LiveScoringViewModel.kt</code>
<strong>Impact:</strong> Fourth optimization phase - removed duplicate StateFlows
<strong>Status:</strong> ✅ COMPLETED - October 9, 2025
<strong>Lines Removed:</strong> 145 lines</p>
<p><strong>Problem (BEFORE):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Duplicate StateFlows in LiveScoringViewModel</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _syncStatus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MutableStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentSyncStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">>(TournamentSyncStatus.Idle)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> syncStatus: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentSyncStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">> </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _syncStatus.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _tournamentRoundState </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MutableStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">archeryapprentice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?>(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentRoundState: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">archeryapprentice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?> </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _tournamentRoundState.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asStateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></figure>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ARCHITECTURAL COMPLIANCE: Expose TournamentSyncService StateFlows instead of duplicating</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> syncStatus: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentSyncStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">> </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentSyncService.syncStatus</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentRoundState: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StateFlow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">com</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">archeryapprentice</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TournamentRound</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?> </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tournamentSyncService.tournamentRoundState</span></span></code></pre></figure>
<p><strong>Methods Delegated:</strong></p>
<ul>
<li><code>observeTournamentRoundState()</code>: 73 → 43 lines (30-line reduction)</li>
<li><code>updateTournamentRoundStatus()</code>: 25 → 6 lines (19-line reduction)</li>
</ul>
<p><strong>Dead Code Removed:</strong></p>
<ul>
<li><code>syncDetailedTournamentScores()</code>: 94 lines (never called)</li>
</ul>
<p><strong>Benefits:</strong></p>
<ul>
<li>✅ 145 lines removed through delegation</li>
<li>✅ Single source of truth for tournament state</li>
<li>✅ Reduced complexity</li>
<li>✅ All 84 LiveScoringViewModel tests passing</li>
</ul>
<hr/>
<h3 id="7-tournament-rank-display-bug--fixed">7. Tournament Rank Display Bug ✅ <strong>FIXED</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#7-tournament-rank-display-bug--fixed" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>RoundViewModel.kt:1022-1024, 1377-1388</code>
<strong>Impact:</strong> All participants showed incorrect rank “3rd / 3 Participants” regardless of actual ranking
<strong>Status:</strong> ✅ COMPLETED - October 9, 2025</p>
<p><strong>Problem (BEFORE):</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Used Round.participants[LocalUser].id which was &quot;local_user&quot; (default)</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// But Firebase stores participants with actual Firebase UID as document ID</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> muId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> targetParticipantId ?: localParticipant?.id  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &quot;local_user&quot; - WRONG!</span></span></code></pre></figure>
<p><strong>Solution Implemented:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// BUG FIX: Use current Firebase UID directly, not the Round's participant ID</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The Round's LocalUser.id is often &quot;local_user&quot; (default), but in Firebase</span></span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// the participant is stored with the actual Firebase UID as the document ID</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> currentFirebaseUid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    com.google.firebase.auth.FirebaseAuth.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().currentUser?.uid</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    android.util.Log.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RoundViewModel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to get Firebase UID for rank retrieval&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e)</span></span>
<span data-line><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    null</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Use explicit targetParticipantId if provided, otherwise use current Firebase UID</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> muId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> targetParticipantId ?: currentFirebaseUid</span></span></code></pre></figure>
<p><strong>User Impact:</strong> Tournament leaderboard now shows correct rank for each participant (1st, 2nd, 3rd, etc.)</p>
<hr/>
<h3 id="8-tie-breaking--complete">8. Tie-Breaking ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#8-tie-breaking--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Files:</strong></p>
<ul>
<li><code>TournamentParticipant.kt:38-39</code> - xCount &amp; tenCount fields added</li>
<li><code>FirebaseTournamentRepository.kt:1179-1180</code> - Multi-field ordering implemented</li>
</ul>
<p><strong>Impact:</strong> Fair competition with standard archery tie-breaking rules
<strong>Status:</strong> ✅ COMPLETED - October 2025
<strong>Commit:</strong> <code>4d38c7b</code> - “feat: Implement tournament tie-breaking and extract ScoreConflictResolutionService”</p>
<p><strong>Implementation:</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="kotlin" data-theme="github-light github-dark"><code data-language="kotlin" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">participantsRef</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orderBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;currentScore&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Query.Direction.DESCENDING)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orderBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Query.Direction.DESCENDING)</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orderBy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tenCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Query.Direction.DESCENDING)</span></span></code></pre></figure>
<p><strong>User Impact:</strong> Fair competition with standard archery rules compliance</p>
<hr/>
<h3 id="9-livescoringviewmodel-god-class--in-progress">9. LiveScoringViewModel God Class 🔄 <strong>IN PROGRESS</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#9-livescoringviewmodel-god-class--in-progress" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>LiveScoringViewModel.kt</code> (2,134 lines, down from 2,808)
<strong>Impact:</strong> High bug risk, difficult maintenance, slow feature development
<strong>Status:</strong> 🔄 4 of 6 optimizations complete (1,363 lines extracted/removed, 68% progress)</p>
<p><strong>Current Metrics:</strong></p>
<ul>
<li><strong>Lines:</strong> 2,134 (target: &lt;1,900) - ⬇️ 674 lines from peak</li>
<li><strong>Extractions Complete:</strong> 4/6
<ul>
<li>✅ TournamentSyncService (556 lines)</li>
<li>✅ ScoreConflictResolutionService (262 lines)</li>
<li>✅ EndCompletionService (400 lines)</li>
<li>✅ StateFlow Delegation (145 lines)</li>
</ul>
</li>
<li><strong>Remaining Extractions:</strong> 2 services (~350 lines estimated)</li>
<li><strong>Progress:</strong> 68% complete</li>
</ul>
<p><strong>Root Cause:</strong> Tournament Phases 2.2-4.1 added ~1,300 lines without extraction
<strong>Progress:</strong> Systematic extraction underway using proven copy-delegate-validate pattern</p>
<p><strong>Extraction Roadmap:</strong></p>
<p>See <a href="../../Architecture/LiveScoringVM-Analysis" class="internal" data-slug="Architecture/LiveScoringVM-Analysis">LiveScoringVM-Analysis</a> for comprehensive analysis.</p>
<p><strong>✅ Priority 1: TournamentSyncService</strong> (556 lines) - COMPLETE (Oct 5)</p>
<ul>
<li>Firebase synchronization</li>
<li>Score queueing</li>
<li>Leaderboard management</li>
</ul>
<p><strong>✅ Priority 2: ScoreConflictResolutionService</strong> (262 lines) - COMPLETE (Oct 2025)</p>
<ul>
<li>Conflict detection</li>
<li>Resolution strategies</li>
<li>Version management</li>
</ul>
<p><strong>✅ Priority 3: EndCompletionService</strong> (400 lines) - COMPLETE (Oct 6)</p>
<ul>
<li>End finalization</li>
<li>End recording and Firebase submission</li>
<li>Retry logic with exponential backoff</li>
<li>Multi-participant completion checking</li>
</ul>
<p><strong>✅ Priority 4: StateFlow Delegation</strong> (145 lines) - COMPLETE (Oct 9)</p>
<ul>
<li>Removed duplicate StateFlows</li>
<li>Delegated observeTournamentRoundState()</li>
<li>Delegated updateTournamentRoundStatus()</li>
<li>Removed dead code</li>
</ul>
<p><strong>🔲 Priority 5: TournamentRoundLifecycleService</strong> (~200 lines, 3 days) - TODO</p>
<ul>
<li>Round initialization</li>
<li>Completion handling</li>
<li>State transitions</li>
</ul>
<p><strong>🔲 Priority 6: StatisticsAggregationService</strong> (~150 lines, 2 days) - TODO</p>
<ul>
<li>Real-time stats calculation</li>
<li>Leaderboard updates</li>
<li>Trend detection</li>
</ul>
<p><strong>Progress:</strong></p>
<ul>
<li><strong>Extracted/Removed:</strong> 1,363 lines (4/6 optimizations)</li>
<li><strong>Remaining:</strong> ~350 lines (2/6 services)</li>
<li><strong>Final Target:</strong> ~1,900 lines (healthy coordinator size)</li>
</ul>
<p><strong>Remaining Effort:</strong> 1-2 weeks (2 services remaining)
<strong>Benefits:</strong></p>
<ul>
<li>Clear separation of concerns</li>
<li>Easier testing (mock only needed services)</li>
<li>Lower cognitive load for developers</li>
<li>Proven extraction pattern established (100% success rate)</li>
</ul>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked disabled/> Each service &lt;500 lines</li>
<li class="task-list-item"><input type="checkbox" disabled/> LiveScoringViewModel &lt;1,900 lines (currently 2,134, 89% to target)</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> All existing tests pass</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> No functionality regression</li>
<li class="task-list-item"><input type="checkbox" checked disabled/> Proven extraction pattern validated (4/4 success)</li>
</ul>
<hr/>
<h2 id="high-priority-p1">High Priority (P1)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#high-priority-p1" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="10-repository-god-classes-">10. Repository God Classes 🟡<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#10-repository-god-classes-" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Files:</strong></p>
<ul>
<li><code>FirebaseTournamentRepository.kt</code>: 1,707 lines</li>
<li><code>HybridTournamentRepository.kt</code>: 1,506 lines</li>
<li><code>RoundRepository.kt</code>: 1,443 lines</li>
<li><code>TournamentRepository.kt</code> (interface): 395 lines, 51 methods</li>
</ul>
<p><strong>Total:</strong> 5,959 lines violating Single Responsibility Principle</p>
<p><strong>Standard:</strong> 200-400 lines, 10-15 methods per repository</p>
<p><strong>Refactoring Plan:</strong></p>
<p><strong>Split TournamentRepository → 4 repositories:</strong></p>
<ol>
<li><strong>TournamentCrudRepository</strong> (~300 lines) - CRUD operations</li>
<li><strong>TournamentSyncRepository</strong> (~400 lines) - Firebase sync, conflicts</li>
<li><strong>TournamentScoreRepository</strong> (~500 lines) - Score submission, caching</li>
<li><strong>TournamentAnalyticsRepository</strong> (~200 lines) - Leaderboards, statistics</li>
</ol>
<p><strong>Split RoundRepository → 3 repositories:</strong></p>
<ol>
<li><strong>RoundCrudRepository</strong> (~400 lines) - Round management</li>
<li><strong>RoundScoringRepository</strong> (~500 lines) - End/arrow scoring</li>
<li><strong>RoundStatisticsRepository</strong> (~400 lines) - Stats, trends</li>
</ol>
<p><strong>Effort:</strong> 6-7 weeks
<strong>Priority:</strong> HIGH but lower than LiveScoringViewModel (data layer vs UI layer)</p>
<hr/>
<h3 id="11-documentation-chaos-">11. Documentation Chaos 🟡<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#11-documentation-chaos-" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> 10+ files severely outdated, claiming features “planned” that are complete</p>
<p><strong>Critical Documentation Issues:</strong></p>
<p><strong>1. tournament/README.md</strong> - SEVERELY OUTDATED</p>
<ul>
<li>Claims “In Progress”: Tournament UI, real-time updates (DONE!)</li>
<li>Claims “Planned”: Tournament creation, cloud sync (DONE!)</li>
<li>Missing: Phases 1-5.2 completion, smart caching</li>
</ul>
<p><strong>2. TOURNAMENT_SYSTEM_DOCUMENTATION.md</strong> - 8-9 MONTHS OLD</p>
<ul>
<li>All testing checkboxes unchecked</li>
<li>Lists complete features as “Future Enhancements”</li>
</ul>
<p><strong>3. README.md (project root)</strong> - 3 MONTHS OUTDATED</p>
<ul>
<li>Last update: July 2025</li>
<li>Missing: Aug-Oct tournament completion, Firebase integration, caching</li>
</ul>
<p><strong>Solution:</strong></p>
<ol>
<li><strong>Archive old files</strong> to <code>docs/COLD_STORAGE/</code> (70 files already moved)</li>
<li><strong>Update critical docs:</strong>
<ul>
<li>README.md → Current status, Aug-Oct work</li>
<li>Tournament README → Mark Phases 1-5 complete</li>
<li>TOURNAMENT_SYSTEM_DOCUMENTATION.md → Update testing status</li>
</ul>
</li>
<li><strong>Remove misleading planning docs</strong> that claim “complete” but zero implementation</li>
</ol>
<p><strong>Effort:</strong> 1 week (8-10 hours)
<strong>Priority:</strong> MEDIUM - doesn’t affect code but affects development velocity</p>
<hr/>
<h3 id="12-missing-database-indexes-">12. Missing Database Indexes 🟡<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#12-missing-database-indexes-" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> 90% coverage, 2 missing composite indexes</p>
<p><strong>Missing Index 1: Equipment Performance Query (MEDIUM)</strong></p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="sql" data-theme="github-light github-dark"><code data-language="sql" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idx_arrow_scores_equipment_time</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> arrow_scores(bowSetupId, scoredAt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DESC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></figure>
<p><strong>Impact:</strong> Equipment performance screen slow with large datasets
<strong>Effort:</strong> 2 hours (write migration, test)
<strong>Priority:</strong> MEDIUM</p>
<hr/>
<h2 id="medium-priority-p2">Medium Priority (P2)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#medium-priority-p2" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="13-roundviewmodel-size-2079-lines">13. RoundViewModel Size (2,079 lines)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#13-roundviewmodel-size-2079-lines" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Status:</strong> STABLE - don’t touch immediately</p>
<p><strong>Recommendation:</strong> DEFER</p>
<ul>
<li>Monitor growth</li>
<li>Extract only if exceeds 2,500 lines</li>
<li>Focus on LiveScoringViewModel first</li>
</ul>
<p><strong>Effort:</strong> 3-4 weeks (if needed)
<strong>Priority:</strong> LOW (stable, functional)</p>
<hr/>
<h3 id="14-activescoringscreen-size-1958-lines">14. ActiveScoringScreen Size (1,958 lines)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#14-activescoringscreen-size-1958-lines" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>File:</strong> <code>ActiveScoringScreen.kt</code>
<strong>Status:</strong> UI component bloat</p>
<p><strong>Recommendation:</strong> Extract composable components</p>
<ul>
<li>Visual scoring UI (~400 lines)</li>
<li>Traditional scoring UI (~300 lines)</li>
<li>Participant management (~250 lines)</li>
<li>Statistics display (~200 lines)</li>
</ul>
<p><strong>Effort:</strong> 2-3 weeks
<strong>Priority:</strong> MEDIUM (lower than ViewModels and repositories)</p>
<hr/>
<h2 id="implementation-roadmap">Implementation Roadmap<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#implementation-roadmap" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="phase-a-quick-wins--complete">Phase A: Quick Wins ✅ <strong>COMPLETE</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-a-quick-wins--complete" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Week 1:</strong> ✅ <strong>COMPLETE</strong></p>
<ul>
<li>✅ <strong>DONE</strong> Fix N+1 query pattern (2 hours) - Commit <code>698e634</code></li>
<li>✅ <strong>DONE</strong> Fix average score bug (30 min) - Commit <code>698e634</code></li>
</ul>
<p><strong>Week 2:</strong> ✅ <strong>COMPLETE</strong></p>
<ul>
<li>✅ <strong>DONE</strong> Implement tie-breaking (8 hours) - Commit <code>4d38c7b</code></li>
<li>✅ <strong>DONE</strong> Extract TournamentSyncService (1 week) - Commit <code>b810eea</code></li>
<li>✅ <strong>DONE</strong> Extract ScoreConflictResolutionService (1 week) - Commit <code>4d38c7b</code></li>
</ul>
<p><strong>Completed Impact:</strong></p>
<ul>
<li>✅ Major user-facing bugs fixed (average score, tournament rank)</li>
<li>✅ 85-95% performance improvement (31 queries → 1 query)</li>
<li>✅ Fair competition with tie-breaking (X count, 10 count)</li>
<li>✅ 1,363 lines extracted/removed from LiveScoringViewModel</li>
</ul>
<hr/>
<h3 id="phase-b-livescoringviewmodel-extraction--in-progress">Phase B: LiveScoringViewModel Extraction 🔄 <strong>IN PROGRESS</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-b-livescoringviewmodel-extraction--in-progress" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Week 1-2:</strong> ✅ <strong>COMPLETE</strong> - TournamentSyncService</p>
<ul>
<li>✅ Extract 556 lines</li>
<li>✅ Validate copy-delegate-validate pattern</li>
<li>✅ Comprehensive testing</li>
</ul>
<p><strong>Week 3:</strong> ✅ <strong>COMPLETE</strong> - ScoreConflictResolutionService</p>
<ul>
<li>✅ Extract 262 lines</li>
<li>✅ Validate extraction pattern</li>
<li>✅ Comprehensive testing</li>
</ul>
<p><strong>Week 4:</strong> ✅ <strong>COMPLETE</strong> - EndCompletionService</p>
<ul>
<li>✅ Extract 400 lines</li>
<li>✅ Validate delegation pattern</li>
<li>✅ Fix failing tests</li>
</ul>
<p><strong>Week 5:</strong> ✅ <strong>COMPLETE</strong> - StateFlow Delegation</p>
<ul>
<li>✅ Remove 145 lines</li>
<li>✅ Delegate to TournamentSyncService</li>
<li>✅ Remove dead code</li>
</ul>
<p><strong>Week 6:</strong> 🔲 <strong>TODO</strong> - Remaining Services</p>
<ul>
<li>🔲 TournamentRoundLifecycleService (~200 lines)</li>
<li>🔲 StatisticsAggregationService (~150 lines)</li>
</ul>
<p><strong>Week 7:</strong> 🔲 <strong>TODO</strong> - Final Cleanup</p>
<ul>
<li>Integration testing</li>
<li>Performance validation</li>
<li>Documentation updates</li>
</ul>
<p><strong>Progress:</strong> 68% complete (4/6 optimizations done, 1,363 lines extracted/removed)
<strong>Expected Final Impact:</strong> ~1,900 line ViewModel, easier maintenance, lower bug risk</p>
<hr/>
<h3 id="phase-c-repository-refactoring-6-7-weeks">Phase C: Repository Refactoring (6-7 weeks)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#phase-c-repository-refactoring-6-7-weeks" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Weeks 1-3:</strong> TournamentRepository Split</p>
<ul>
<li>Design 4 focused repositories</li>
<li>Migrate implementations</li>
<li>Update dependency injection</li>
</ul>
<p><strong>Weeks 4-5:</strong> RoundRepository Split</p>
<ul>
<li>Design 3 focused repositories</li>
<li>Migrate implementations</li>
<li>Update dependency injection</li>
</ul>
<p><strong>Weeks 6-7:</strong> Testing &amp; Validation</p>
<ul>
<li>Integration testing</li>
<li>Performance validation</li>
<li>Bug fixes</li>
</ul>
<p><strong>Expected Impact:</strong> Better architecture, easier testing, clearer domain boundaries</p>
<hr/>
<h2 id="lessons-learned">Lessons Learned<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#lessons-learned" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="pattern-planning--implementation">Pattern: “Planning != Implementation”<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-planning--implementation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Discovered:</strong> Multiple features marked “complete” in docs with zero implementation</p>
<p><strong>Solution:</strong></p>
<ul>
<li>Definition of Done: Code merged + tests passing + docs updated</li>
<li>Code review validates implementation, not just planning</li>
<li>Regular architecture audits (like this checkpoint)</li>
</ul>
<h3 id="pattern-incremental-addition-without-extraction">Pattern: “Incremental Addition Without Extraction”<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-incremental-addition-without-extraction" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Discovered:</strong> Tournament features added ~1,300 lines to LiveScoringViewModel without refactoring</p>
<p><strong>Solution:</strong></p>
<ul>
<li>Line count thresholds with pre-commit hooks</li>
<li>Mandatory extraction when ViewModel exceeds 1,500 lines</li>
<li>Architecture review for features adding >200 lines to single class</li>
</ul>
<h3 id="pattern-documentation-drift">Pattern: “Documentation Drift”<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#pattern-documentation-drift" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Discovered:</strong> 10+ files claiming features “planned” that are complete</p>
<p><strong>Solution:</strong></p>
<ul>
<li>Documentation update as part of Definition of Done</li>
<li>Quarterly documentation audit</li>
<li>Archive old docs to prevent confusion</li>
</ul>
<hr/>
<h2 id="related-documentation">Related Documentation<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#related-documentation" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li><a href="../../Project-Status/Implementation-Status-10-09-25" class="internal alias" data-slug="Project-Status/Implementation-Status-10-09-25">Implementation Status (Oct 9)</a></li>
<li><a href="../../Project-Status/Checkpoint-Findings" class="internal alias" data-slug="Project-Status/Checkpoint-Findings">Checkpoint Findings</a> - Detailed investigation report</li>
<li><a href="../../Architecture/LiveScoringVM-Analysis" class="internal alias" data-slug="Architecture/LiveScoringVM-Analysis">LiveScoringVM Analysis</a> - Deep dive with progress tracking</li>
<li><a href="../../Project-Status/Current-TODO" class="internal alias" data-slug="Project-Status/Current-TODO">Current TODO</a> - Current project priorities</li>
<li><a href="../../Architecture/MVVM-Patterns" class="internal alias" data-slug="Architecture/MVVM-Patterns">MVVM Patterns</a></li>
</ul></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-18" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><ul id="list-1" class="toc-content overflow"><li class="depth-0"><a href="#technical-debt-master-document" data-for="technical-debt-master-document">Technical Debt Master Document</a></li><li class="depth-1"><a href="#executive-summary" data-for="executive-summary">Executive Summary</a></li><li class="depth-1"><a href="#priority-matrix" data-for="priority-matrix">Priority Matrix</a></li><li class="depth-2"><a href="#-critical-p0---address-before-next-feature-epoch" data-for="-critical-p0---address-before-next-feature-epoch">🚨 CRITICAL (P0) - Address Before Next Feature Epoch</a></li><li class="depth-2"><a href="#-high-p1---next-2-3-months" data-for="-high-p1---next-2-3-months">🟡 HIGH (P1) - Next 2-3 Months</a></li><li class="depth-2"><a href="#-medium-p2---future-improvements" data-for="-medium-p2---future-improvements">🟢 MEDIUM (P2) - Future Improvements</a></li><li class="depth-1"><a href="#critical-issues-p0" data-for="critical-issues-p0">Critical Issues (P0)</a></li><li class="depth-2"><a href="#1-n1-query-pattern--fixed" data-for="1-n1-query-pattern--fixed">1. N+1 Query Pattern ✅ FIXED</a></li><li class="depth-2"><a href="#2-average-score-always-shows-00--fixed" data-for="2-average-score-always-shows-00--fixed">2. Average Score Always Shows 0.0 ✅ FIXED</a></li><li class="depth-2"><a href="#3-tournamentsyncservice-extraction--complete" data-for="3-tournamentsyncservice-extraction--complete">3. TournamentSyncService Extraction ✅ COMPLETE</a></li><li class="depth-2"><a href="#4-scoreconflictresolutionservice-extraction--complete" data-for="4-scoreconflictresolutionservice-extraction--complete">4. ScoreConflictResolutionService Extraction ✅ COMPLETE</a></li><li class="depth-2"><a href="#5-endcompletionservice-extraction--complete" data-for="5-endcompletionservice-extraction--complete">5. EndCompletionService Extraction ✅ COMPLETE</a></li><li class="depth-2"><a href="#6-stateflow-delegation--complete" data-for="6-stateflow-delegation--complete">6. StateFlow Delegation ✅ COMPLETE</a></li><li class="depth-2"><a href="#7-tournament-rank-display-bug--fixed" data-for="7-tournament-rank-display-bug--fixed">7. Tournament Rank Display Bug ✅ FIXED</a></li><li class="depth-2"><a href="#8-tie-breaking--complete" data-for="8-tie-breaking--complete">8. Tie-Breaking ✅ COMPLETE</a></li><li class="depth-2"><a href="#9-livescoringviewmodel-god-class--in-progress" data-for="9-livescoringviewmodel-god-class--in-progress">9. LiveScoringViewModel God Class 🔄 IN PROGRESS</a></li><li class="depth-1"><a href="#high-priority-p1" data-for="high-priority-p1">High Priority (P1)</a></li><li class="depth-2"><a href="#10-repository-god-classes-" data-for="10-repository-god-classes-">10. Repository God Classes 🟡</a></li><li class="depth-2"><a href="#11-documentation-chaos-" data-for="11-documentation-chaos-">11. Documentation Chaos 🟡</a></li><li class="depth-2"><a href="#12-missing-database-indexes-" data-for="12-missing-database-indexes-">12. Missing Database Indexes 🟡</a></li><li class="depth-1"><a href="#medium-priority-p2" data-for="medium-priority-p2">Medium Priority (P2)</a></li><li class="depth-2"><a href="#13-roundviewmodel-size-2079-lines" data-for="13-roundviewmodel-size-2079-lines">13. RoundViewModel Size (2,079 lines)</a></li><li class="depth-2"><a href="#14-activescoringscreen-size-1958-lines" data-for="14-activescoringscreen-size-1958-lines">14. ActiveScoringScreen Size (1,958 lines)</a></li><li class="depth-1"><a href="#implementation-roadmap" data-for="implementation-roadmap">Implementation Roadmap</a></li><li class="depth-2"><a href="#phase-a-quick-wins--complete" data-for="phase-a-quick-wins--complete">Phase A: Quick Wins ✅ COMPLETE</a></li><li class="depth-2"><a href="#phase-b-livescoringviewmodel-extraction--in-progress" data-for="phase-b-livescoringviewmodel-extraction--in-progress">Phase B: LiveScoringViewModel Extraction 🔄 IN PROGRESS</a></li><li class="depth-2"><a href="#phase-c-repository-refactoring-6-7-weeks" data-for="phase-c-repository-refactoring-6-7-weeks">Phase C: Repository Refactoring (6-7 weeks)</a></li><li class="depth-1"><a href="#lessons-learned" data-for="lessons-learned">Lessons Learned</a></li><li class="depth-2"><a href="#pattern-planning--implementation" data-for="pattern-planning--implementation">Pattern: “Planning != Implementation”</a></li><li class="depth-2"><a href="#pattern-incremental-addition-without-extraction" data-for="pattern-incremental-addition-without-extraction">Pattern: “Incremental Addition Without Extraction”</a></li><li class="depth-2"><a href="#pattern-documentation-drift" data-for="pattern-documentation-drift">Pattern: “Documentation Drift”</a></li><li class="depth-1"><a href="#related-documentation" data-for="related-documentation">Related Documentation</a></li><li class="overflow-end"></li></ul></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> © 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module">function f(i,e){if(!i)return;function r(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function t(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}i?.addEventListener("click",r),window.addCleanup(()=>i?.removeEventListener("click",r)),document.addEventListener("keydown",t),window.addCleanup(()=>document.removeEventListener("keydown",t))}function y(i){for(;i.firstChild;)i.removeChild(i.firstChild)}var h=class{constructor(e,r){this.container=e;this.content=r;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),r=this.onMouseMove.bind(this),t=this.onMouseUp.bind(this),o=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",t),window.addEventListener("resize",o),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",r),()=>document.removeEventListener("mouseup",t),()=>window.removeEventListener("resize",o))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let r=this.createButton("+",()=>this.zoom(.1)),t=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(t),e.appendChild(o),e.appendChild(r),this.container.appendChild(e)}createButton(e,r){let t=document.createElement("button");return t.textContent=e,t.className="mermaid-control-button",t.addEventListener("click",r),window.addCleanup(()=>t.removeEventListener("click",r)),t}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let r=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),t=this.content.getBoundingClientRect(),o=t.width/2,n=t.height/2,c=r-this.scale;this.currentPan.x-=o*c,this.currentPan.y-=n*c,this.scale=r,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},C=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],E;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;E||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let r=E.default,t=new WeakMap;for(let n of e)t.set(n,n.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let a=t.get(s);a&&(s.innerHTML=a)}let n=C.reduce((s,a)=>(s[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),s),{}),c=document.documentElement.getAttribute("saved-theme")==="dark";r.initialize({startOnLoad:!1,securityLevel:"loose",theme:c?"dark":"base",themeVariables:{fontFamily:n["--codeFont"],primaryColor:n["--light"],primaryTextColor:n["--darkgray"],primaryBorderColor:n["--tertiary"],lineColor:n["--darkgray"],secondaryColor:n["--secondary"],tertiaryColor:n["--tertiary"],clusterBkg:n["--light"],edgeLabelBackground:n["--highlight"]}}),await r.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let n=0;n<e.length;n++){let v=function(){let g=l.querySelector("#mermaid-space"),m=l.querySelector(".mermaid-content");if(!m)return;y(m);let w=c.querySelector("svg").cloneNode(!0);m.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new h(g,m)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},c=e[n],s=c.parentElement,a=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(a),L=a.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),f(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript"></script><script src="../../postscript.js" type="module"></script></html>